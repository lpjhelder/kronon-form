<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kronon B2B — Formulário de Pré-Instalação</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f5f4f1;
            color: #1a1a1a;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            padding: 24px 16px;
        }

        .container {
            max-width: 540px;
            width: 100%;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 28px;
            padding: 32px 24px 24px;
            background: #fff;
            border-radius: 16px;
            border: 1px solid #e8e5e0;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
        }

        .partnership {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .partnership img {
            height: 40px;
            object-fit: contain;
        }

        .partnership .divider {
            width: 1px;
            height: 36px;
            background: #e0ddd8;
        }

        .pilot-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            background: #fef3c7;
            color: #92400e;
            font-size: 10px;
            font-weight: 700;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            margin-top: 8px;
        }

        .header-title {
            font-size: 22px;
            font-weight: 800;
            color: #1a1a1a;
            margin-bottom: 4px;
        }

        .header-sub {
            font-size: 13px;
            color: #78716c;
            font-weight: 400;
        }

        .accent-line {
            height: 3px;
            background: linear-gradient(90deg, #c41e1e, #f59e0b, #c41e1e);
            border-radius: 2px;
            margin-top: 20px;
        }

        /* Cards */
        .card {
            background: #fff;
            border-radius: 14px;
            padding: 24px;
            margin-bottom: 14px;
            border: 1px solid #e8e5e0;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.03);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 14px;
            border-bottom: 1px solid #f0ede8;
        }

        .card-num {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 800;
            flex-shrink: 0;
        }

        .card-num.n1 {
            background: #fef2f2;
            color: #c41e1e;
        }

        .card-num.n2 {
            background: #fef9c3;
            color: #a16207;
        }

        .card-num.n3 {
            background: #f5f5f4;
            color: #57534e;
        }

        .card-title {
            font-size: 15px;
            font-weight: 700;
            color: #1a1a1a;
        }

        .card-subtitle {
            font-size: 11px;
            color: #a8a29e;
            margin-top: 1px;
        }

        /* Fields */
        .field {
            margin-bottom: 16px;
        }

        .field:last-child {
            margin-bottom: 0;
        }

        label {
            display: block;
            font-size: 11px;
            font-weight: 600;
            color: #78716c;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.4px;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="number"] {
            width: 100%;
            padding: 11px 14px;
            background: #fafaf9;
            border: 1.5px solid #e7e5e4;
            border-radius: 8px;
            color: #1a1a1a;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s;
        }

        input:focus {
            outline: none;
            border-color: #c41e1e;
            box-shadow: 0 0 0 3px rgba(196, 30, 30, 0.06);
            background: #fff;
        }

        input::placeholder {
            color: #b8b5b0;
        }

        /* Toggle buttons */
        .toggle-group {
            display: flex;
            gap: 8px;
        }

        .toggle-btn {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            border: 1.5px solid #e7e5e4;
            background: #fafaf9;
            color: #78716c;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Inter', sans-serif;
            text-align: center;
        }

        .toggle-btn:hover {
            border-color: #d6d3d1;
        }

        .toggle-btn.active-yes {
            border-color: #16a34a;
            background: #f0fdf4;
            color: #15803d;
        }

        .toggle-btn.active-no {
            border-color: #dc2626;
            background: #fef2f2;
            color: #dc2626;
        }

        /* Option pills */
        .option-group {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .option-btn {
            padding: 7px 14px;
            border-radius: 6px;
            border: 1.5px solid #e7e5e4;
            background: #fafaf9;
            color: #78716c;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Inter', sans-serif;
        }

        .option-btn:hover {
            border-color: #d6d3d1;
        }

        .option-btn.active {
            border-color: #c41e1e;
            background: #fef2f2;
            color: #c41e1e;
            font-weight: 600;
        }

        /* Conditional sections */
        .ti-fields {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, opacity 0.3s ease;
            opacity: 0;
        }

        .ti-fields.show {
            max-height: 300px;
            opacity: 1;
            margin-top: 16px;
        }

        .card-hidden {
            display: none;
        }

        .card-hidden.show {
            display: block;
            animation: fadeSlide 0.35s ease;
        }

        /* Send button */
        .btn-send {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            border: none;
            background: #c41e1e;
            color: #fff;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s;
            margin-top: 6px;
            letter-spacing: 0.2px;
        }

        .btn-send:hover {
            background: #b91c1c;
            box-shadow: 0 4px 16px rgba(196, 30, 30, 0.2);
        }

        .btn-send:active {
            transform: scale(0.99);
        }

        .btn-send:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            box-shadow: none;
        }

        .btn-send.sending {
            background: #a8a29e;
        }

        .btn-send.sent {
            background: #16a34a;
        }

        /* Success overlay */
        .success-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.45);
            backdrop-filter: blur(4px);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .success-overlay.show {
            display: flex;
            animation: fadeIn 0.25s ease;
        }

        .success-box {
            background: #fff;
            border-radius: 16px;
            padding: 36px;
            text-align: center;
            max-width: 380px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12);
        }

        .success-check {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #f0fdf4;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
        }

        .success-check svg {
            width: 28px;
            height: 28px;
            stroke: #16a34a;
            stroke-width: 3;
            fill: none;
        }

        .success-title {
            font-size: 18px;
            font-weight: 800;
            color: #1a1a1a;
            margin-bottom: 6px;
        }

        .success-msg {
            font-size: 13px;
            color: #78716c;
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .btn-close {
            padding: 10px 28px;
            border-radius: 8px;
            border: 1.5px solid #e7e5e4;
            background: #fff;
            color: #78716c;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            transition: all 0.2s;
        }

        .btn-close:hover {
            border-color: #c41e1e;
            color: #c41e1e;
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 20px;
            padding: 12px;
            font-size: 10px;
            color: #b8b5b0;
            letter-spacing: 0.2px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes fadeSlide {
            from {
                opacity: 0;
                transform: translateY(-8px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>

    <div class="container">

        <!-- Header -->
        <div class="header">
            <div class="partnership">
                <img src="https://supervarejista.net/wp-content/uploads/2020/03/logomara-super-varejista.png"
                    alt="SuperVarejista">
            </div>
            <div class="pilot-badge">Projeto Piloto</div>
            <div style="margin-top: 16px;">
                <div class="header-title">Formulário de Pré-Instalação</div>
                <div class="header-sub">Kronon Analytics B2B × SuperVarejista</div>
            </div>
            <div class="accent-line"></div>
        </div>

        <!-- 1. Dados da Empresa -->
        <div class="card">
            <div class="card-header">
                <div class="card-num n1">1</div>
                <div>
                    <div class="card-title">Dados da Empresa</div>
                    <div class="card-subtitle">Informações básicas da loja</div>
                </div>
            </div>
            <div class="field">
                <label>Nome da Loja / Razão Social *</label>
                <input type="text" id="nome_loja" placeholder="Ex: Supermercado Bom Preço">
            </div>
            <div class="field">
                <label>CNPJ</label>
                <input type="text" id="cnpj" placeholder="00.000.000/0000-00">
            </div>
            <div class="field">
                <label>Quantidade de filiais</label>
                <input type="number" id="filiais" placeholder="Ex: 3" min="1">
            </div>
        </div>

        <!-- 2. TI -->
        <div class="card">
            <div class="card-header">
                <div class="card-num n2">2</div>
                <div>
                    <div class="card-title">Responsável de TI</div>
                    <div class="card-subtitle">A loja possui alguém responsável pela tecnologia?</div>
                </div>
            </div>
            <div class="field">
                <label>Possui responsável de TI?</label>
                <div class="toggle-group">
                    <button class="toggle-btn" onclick="toggleTI(true, this)">Sim</button>
                    <button class="toggle-btn" onclick="toggleTI(false, this)">Não</button>
                </div>
            </div>
            <div class="ti-fields" id="ti_fields">
                <div class="field"><label>Nome completo</label><input type="text" id="ti_nome"
                        placeholder="Nome do responsável"></div>
                <div class="field"><label>Telefone / WhatsApp</label><input type="tel" id="ti_telefone"
                        placeholder="(00) 00000-0000"></div>
                <div class="field"><label>E-mail</label><input type="email" id="ti_email"
                        placeholder="email@exemplo.com"></div>
            </div>
        </div>

        <!-- 3. Computador -->
        <div class="card card-hidden" id="card_computador">
            <div class="card-header">
                <div class="card-num n3">3</div>
                <div>
                    <div class="card-title">Sobre o Computador</div>
                    <div class="card-subtitle">Onde o sistema será instalado</div>
                </div>
            </div>
            <div class="field">
                <label>Sistema operacional Windows 10+ ou Windows Server?</label>
                <div class="toggle-group">
                    <button class="toggle-btn" onclick="selectToggle(this, 'windows', true)">Sim</button>
                    <button class="toggle-btn" onclick="selectToggle(this, 'windows', false)">Não</button>
                </div>
            </div>
            <div class="field">
                <label>O computador que acessa o B2B está na mesma rede do ERP?</label>
                <div class="toggle-group">
                    <button class="toggle-btn" onclick="selectToggle(this, 'rede', true)">Sim</button>
                    <button class="toggle-btn" onclick="selectToggle(this, 'rede', false)">Não</button>
                </div>
            </div>
            <div class="field">
                <label>Antivírus instalado</label>
                <div class="option-group">
                    <button class="option-btn" onclick="selectOption(this, 'antivirus')">Windows Defender</button>
                    <button class="option-btn" onclick="selectOption(this, 'antivirus')">Kaspersky</button>
                    <button class="option-btn" onclick="selectOption(this, 'antivirus')">Avast</button>
                    <button class="option-btn" onclick="selectOption(this, 'antivirus')">Norton</button>
                    <button class="option-btn" onclick="selectOption(this, 'antivirus')">Outro</button>
                    <button class="option-btn" onclick="selectOption(this, 'antivirus')">Não sei</button>
                </div>
            </div>
            <div class="field" id="antivirus_outro_field" style="display:none;">
                <label>Qual antivírus?</label>
                <input type="text" id="antivirus_outro" placeholder="Nome do antivírus">
            </div>
            <div class="field">
                <label>Navegador utilizado para acessar o B2B</label>
                <div class="option-group">
                    <button class="option-btn" onclick="selectOption(this, 'navegador')">Chrome</button>
                    <button class="option-btn" onclick="selectOption(this, 'navegador')">Edge</button>
                    <button class="option-btn" onclick="selectOption(this, 'navegador')">Outro</button>
                </div>
            </div>
        </div>

        <button class="btn-send" id="btn_send" onclick="enviar()">Enviar formulário</button>
        <div class="footer">Kronon Analytics × SuperVarejista — Projeto Piloto 2026</div>
    </div>

    <!-- Success -->
    <div class="success-overlay" id="success_overlay">
        <div class="success-box">
            <div class="success-check">
                <svg viewBox="0 0 24 24">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
            </div>
            <div class="success-title">Enviado com sucesso</div>
            <div class="success-msg">Suas informações foram recebidas.<br>Entraremos em contato para agendar a
                instalação.</div>
            <button class="btn-close"
                onclick="document.getElementById('success_overlay').classList.remove('show')">Fechar</button>
        </div>
    </div>

    <script>
        const WEBHOOK = "https://discord.com/api/webhooks/1476962204191424696/9GdC0IneOqd5uKopR72fpuFWbB34a8rJSAeewAhCoi7HwEuhF_4H0aLYGdjYZTfuwzPc";
        const state = { temTI: null, windows: null, rede: null, antivirus: null, navegador: null };

        function toggleTI(value, btn) {
            state.temTI = value;
            btn.parentElement.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active-yes', 'active-no'));
            btn.classList.add(value ? 'active-yes' : 'active-no');
            const f = document.getElementById('ti_fields');
            const pc = document.getElementById('card_computador');
            if (value) {
                f.classList.add('show');
                pc.classList.remove('show');
                state.windows = null; state.rede = null; state.antivirus = null; state.navegador = null;
                pc.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active-yes', 'active-no'));
                pc.querySelectorAll('.option-btn').forEach(b => b.classList.remove('active'));
            } else {
                f.classList.remove('show');
                ['ti_nome', 'ti_telefone', 'ti_email'].forEach(id => document.getElementById(id).value = '');
                pc.classList.add('show');
            }
        }

        function selectToggle(btn, key, value) {
            state[key] = value;
            btn.parentElement.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active-yes', 'active-no'));
            btn.classList.add(value ? 'active-yes' : 'active-no');
        }

        function selectOption(btn, key) {
            btn.parentElement.querySelectorAll('.option-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            state[key] = btn.textContent.trim();
            if (key === 'antivirus') document.getElementById('antivirus_outro_field').style.display = state.antivirus === 'Outro' ? 'block' : 'none';
        }

        function val(id) { return document.getElementById(id).value.trim(); }

        async function enviar() {
            const nome = val('nome_loja');
            if (!nome) { alert('Preencha o nome da loja.'); return; }

            const btn = document.getElementById('btn_send');
            btn.disabled = true; btn.classList.add('sending'); btn.textContent = 'Enviando...';

            let av = state.antivirus || 'Não respondido';
            if (av === 'Outro') av = val('antivirus_outro') || 'Outro';

            let tiValue = '';
            if (state.temTI === true) {
                const parts = [];
                if (val('ti_nome')) parts.push('Nome: ' + val('ti_nome'));
                if (val('ti_telefone')) parts.push('Tel: ' + val('ti_telefone'));
                if (val('ti_email')) parts.push('Email: ' + val('ti_email'));
                tiValue = parts.length ? parts.join('\n') : 'Sim (dados não preenchidos)';
            } else if (state.temTI === false) {
                tiValue = 'Não possui';
            } else {
                tiValue = 'Não respondido';
            }

            const yn = v => v === true ? 'Sim' : v === false ? 'Não' : 'Não respondido';

            const payload = {
                embeds: [{
                    title: "Novo Formulário — Pré-Instalação",
                    color: 12854046,
                    fields: [
                        { name: "Loja", value: nome, inline: true },
                        { name: "CNPJ", value: val('cnpj') || 'Não informado', inline: true },
                        { name: "Filiais", value: val('filiais') || 'Não informado', inline: true },
                        { name: "Responsável de TI", value: tiValue, inline: false },
                        ...(state.temTI !== true ? [
                            { name: "Windows 10+ / Server", value: yn(state.windows), inline: true },
                            { name: "Mesma rede do ERP", value: yn(state.rede), inline: true },
                            { name: "Antivírus", value: av, inline: true },
                            { name: "Navegador", value: state.navegador || 'Não respondido', inline: true },
                        ] : []),
                    ],
                    footer: { text: "Kronon Analytics B2B × SuperVarejista" },
                    timestamp: new Date().toISOString()
                }]
            };

            try {
                const res = await fetch(WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (res.ok || res.status === 204) {
                    btn.classList.remove('sending'); btn.classList.add('sent'); btn.textContent = 'Enviado';
                    document.getElementById('success_overlay').classList.add('show');
                } else { throw new Error('Status ' + res.status); }
            } catch (e) {
                btn.disabled = false; btn.classList.remove('sending');
                btn.textContent = 'Enviar formulário';
                alert('Erro ao enviar. Verifique sua conexão e tente novamente.');
            }
        }
    </script>
</body>

</html>